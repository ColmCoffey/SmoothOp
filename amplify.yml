version: 1
frontend:
  phases:
    preBuild:
      commands:
        - sudo yum install -y java-11-amazon-corretto-devel
        - ls /usr/lib/jvm/java-11-amazon-corretto.x86_64
        - export JAVA_HOME=/usr/lib/jvm/java-11-amazon-corretto.x86_64

    build:
      commands:

        - export JAVA_HOME=/usr/lib/jvm/java-11-amazon-corretto.x86_64
        - chmod +x ./gradlew
        - $JAVA_HOME/bin/java -version
        - ./gradlew clean
        - ./gradlew assembleRelease
  artifacts:
    baseDirectory: app/build/outputs/apk/release
    files:
      - '**/*'
  cache:
    paths:
      - ~/.gradle/**/*
env:
  variables:
    JAVA_HOME: /usr/lib/jvm/java-11-amazon-corretto.x86_64
